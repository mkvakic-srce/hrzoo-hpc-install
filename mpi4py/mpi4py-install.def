Bootstrap: docker
From: rockylinux:8

%files
  mpi_hello_world.c /myapp/

%environment
  export LD_LIBRARY_PATH=/usr/lib64/mpich/lib:$LD_LIBRARY_PATH
  export PATH=/usr/lib64/mpich/bin:$PATH

%post

  # dnf
  dnf update -y
  dnf install mpich-devel -y

  # mpich 
  export LD_LIBRARY_PATH=/usr/lib64/mpich/lib:$LD_LIBRARY_PATH
  export PATH=/usr/lib64/mpich/bin:$PATH

  # hello world
  mpicc -o /myapp/mpi_hello_world /myapp/mpi_hello_world.c
